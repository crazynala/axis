generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model JobTag {
  id    Int           @id @default(autoincrement())
  jobId Int
  tagId Int
  job   Job           @relation(fields: [jobId], references: [id], onDelete: Cascade)
  tag   TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([jobId, tagId])
  @@index([tagId])
}

model AssemblyTag {
  id         Int           @id @default(autoincrement())
  assemblyId Int
  tagId      Int
  assembly   Assembly      @relation(fields: [assemblyId], references: [id], onDelete: Cascade)
  tag        TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([assemblyId, tagId])
  @@index([tagId])
}

model CostingTag {
  id        Int           @id @default(autoincrement())
  costingId Int
  tagId     Int
  costing   Costing       @relation(fields: [costingId], references: [id], onDelete: Cascade)
  tag       TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([costingId, tagId])
  @@index([tagId])
}

model ShipmentTag {
  id         Int           @id @default(autoincrement())
  shipmentId Int
  tagId      Int
  shipment   Shipment      @relation(fields: [shipmentId], references: [id], onDelete: Cascade)
  tag        TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([shipmentId, tagId])
  @@index([tagId])
}

model PurchaseOrderTag {
  id              Int           @id @default(autoincrement())
  purchaseOrderId Int
  tagId           Int
  purchaseOrder   PurchaseOrder @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)
  tag             TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([purchaseOrderId, tagId])
  @@index([tagId])
}

model TagDefinition {
  id                Int                @id @default(autoincrement())
  name              String
  scope             TagScope
  ownerId           Int?
  color             String?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  assemblyTags      AssemblyTag[]
  costingTags       CostingTag[]
  jobTags           JobTag[]
  productTags       ProductTag[]
  purchaseOrderTags PurchaseOrderTag[]
  shipmentTags      ShipmentTag[]
  owner             User?              @relation(fields: [ownerId], references: [id])

  @@unique([name, scope, ownerId])
}

model Product {
  id                    Int                     @id @default(autoincrement())
  sku                   String?                 @unique
  name                  String?
  description           String?
  type                  ProductType?
  supplierId            Int?
  customerId            Int?
  costPrice             Decimal?                @db.Decimal(14, 4)
  costCurrency          String?                 @default("USD")
  purchaseTaxId         Int?
  categoryId            Int?
  subCategoryId         Int?
  templateId            Int?
  pricingGroupId        Int?
  manualSalePrice       Decimal?                @db.Decimal(14, 4)
  manualMargin          Decimal?                @db.Decimal(14, 4)
  defaultCostQty        Int                     @default(60)
  variantSetId          Int?
  stockTrackingEnabled  Boolean                 @default(false)
  batchTrackingEnabled  Boolean                 @default(false)
  productStage          ProductStage            @default(SETUP)
  isActive              Boolean?
  notes                 String?
  nameUnaccented        String?
  descriptionUnaccented String?
  notesUnaccented       String?
  costGroupId           Int?
  salePriceGroupId      Int?
  pricingSpecId         Int?
  pricingModel          ProductPricingModel?
  baselinePriceAtMoq    Decimal?                @db.Decimal(14, 4)
  transferPercent       Decimal?                @db.Decimal(8, 4) @default(0.75)
  createdBy             String?
  modifiedBy            String?
  createdAt             DateTime?               @default(now())
  updatedAt             DateTime?               @updatedAt
  whiteboard            String?
  flagIsDisabled        Boolean                 @default(false)
  primaryProductLineId  Int?
  leadTimeDays          Int?
  externalStepType      ExternalStepType?
  assemblies            Assembly[]
  batches               Batch[]
  boxLines              BoxLine[]
  Costing               Costing[]
  expenses              Expense[]
  invoiceLines          InvoiceLine[]
  category              ValueList?              @relation("ProductCategory", fields: [categoryId], references: [id])
  subCategory           ValueList?              @relation("ProductSubCategory", fields: [subCategoryId], references: [id])
  template              ProductTemplate?        @relation(fields: [templateId], references: [id])
  costGroup             ProductCostGroup?       @relation(fields: [costGroupId], references: [id])
  customer              Company?                @relation("Customer", fields: [customerId], references: [id])
  pricingGroup          SupplierPricingGroup?   @relation(fields: [pricingGroupId], references: [id])
  primaryProductLine    ProductLine?            @relation("PrimaryProductLine", fields: [primaryProductLineId], references: [id])
  purchaseTax           ValueList?              @relation("Tax", fields: [purchaseTaxId], references: [id])
  salePriceGroup        SalePriceGroup?         @relation(fields: [salePriceGroupId], references: [id])
  supplier              Company?                @relation("Supplier", fields: [supplierId], references: [id])
  variantSet            VariantSet?             @relation(fields: [variantSetId], references: [id])
  pricingSpec           PricingSpec?            @relation(fields: [pricingSpecId], references: [id])
  productCostRanges     ProductCostRange[]
  ProductLine           ProductLine[]
  productLines          ProductLine[]           @relation("ParentProduct")
  productMovements      ProductMovementLine[]
  productTags           ProductTag[]
  attributeValues       ProductAttributeValue[]
  purchaseOrderLines    PurchaseOrderLine[]
  materialDemands       MaterialDemand[]
  supplyReservations    SupplyReservation[]
  salePriceRanges       SalePriceRange[]
  shipmentLines         ShipmentLine[]
}

model ProductAttributeDefinition {
  id                    Int                      @id @default(autoincrement())
  key                   String                   @unique
  label                 String
  dataType              ProductAttributeDataType
  isRequired            Boolean                  @default(false)
  isFilterable          Boolean                  @default(false)
  enumOptions           Json?
  validation            Json?
  appliesToProductTypes String[]
  appliesToCategoryIds  Int[]                    @default([])
  appliesToSubcategoryIds Int[]                  @default([])
  displayWidth          ProductAttributeDisplayWidth @default(full)
  sortOrder             Int                      @default(0)
  createdAt             DateTime                 @default(now())
  updatedAt             DateTime                 @updatedAt
  options               ProductAttributeOption[]
  values                ProductAttributeValue[]

  @@index([isFilterable])
  @@index([sortOrder])
}

model ProductAttributeOption {
  id             Int                         @id @default(autoincrement())
  definitionId   Int
  label          String
  slug           String
  isArchived     Boolean                     @default(false)
  mergedIntoId   Int?
  createdAt      DateTime                    @default(now())
  updatedAt      DateTime                    @updatedAt
  definition     ProductAttributeDefinition  @relation(fields: [definitionId], references: [id], onDelete: Cascade)
  mergedInto     ProductAttributeOption?     @relation("ProductAttributeOptionMerge", fields: [mergedIntoId], references: [id])
  mergedFrom     ProductAttributeOption[]    @relation("ProductAttributeOptionMerge")
  values         ProductAttributeValue[]

  @@unique([definitionId, slug])
  @@index([definitionId])
  @@index([mergedIntoId])
}

model ProductAttributeValue {
  id           Int                        @id @default(autoincrement())
  productId    Int
  definitionId Int
  optionId     Int?
  valueString  String?
  valueNumber  Decimal?                   @db.Decimal(14, 4)
  valueBool    Boolean?
  valueJson    Json?
  createdAt    DateTime                   @default(now())
  updatedAt    DateTime                   @updatedAt
  product      Product                    @relation(fields: [productId], references: [id], onDelete: Cascade)
  definition   ProductAttributeDefinition @relation(fields: [definitionId], references: [id], onDelete: Cascade)
  option       ProductAttributeOption?    @relation(fields: [optionId], references: [id], onDelete: SetNull)

  @@unique([productId, definitionId])
  @@index([definitionId])
  @@index([productId])
  @@index([optionId])
  @@index([definitionId, valueString])
  @@index([definitionId, valueNumber])
  @@index([definitionId, valueBool])
}

model ProductTag {
  id        Int           @id @default(autoincrement())
  productId Int
  tagId     Int
  createdAt DateTime      @default(now())
  product   Product       @relation(fields: [productId], references: [id], onDelete: Cascade)
  tag       TagDefinition @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([productId, tagId])
  @@index([tagId])
}

model Company {
  id                              Int                     @id @default(autoincrement())
  name                            String?
  phone                           String?
  email                           String?
  website                         String?
  notes                           String?
  isCarrier                       Boolean?
  isCustomer                      Boolean?
  isSupplier                      Boolean?
  isInactive                      Boolean?
  defaultMarginOverride           Decimal?                @db.Decimal(14, 4)
  priceMultiplier                 Decimal?                @db.Decimal(14, 4)
  stockLocationId                 Int?
  createdBy                       String?
  modifiedBy                      String?
  createdAt                       DateTime?               @default(now())
  updatedAt                       DateTime?               @updatedAt
  nameUnaccented                  String?
  isConsignee                     Boolean?
  invoiceBillUpon                 InvoiceBillUpon?        @default(Ship)
  invoicePercentOnCut             Decimal?                @db.Decimal(5, 2)
  invoicePercentOnOrder           Decimal?                @db.Decimal(5, 2)
  defaultLeadTimeDays             Int?
  code                            String?                 @unique
  shortCode                       String?                 @unique
  shortName                       String?
  projectCodeNextNumber           Int                     @default(1)
  defaultAddressId                Int?
  addresses                       Address[]               @relation("CompanyAddresses")
  assemblyActivitiesAsVendor      AssemblyActivity[]      @relation("AssemblyActivity_vendorCompany")
  boxes                           Box[]
  stockLocation                   Location?               @relation("Company_stockLocation", fields: [stockLocationId], references: [id])
  contacts                        Contact[]
  invoices                        Invoice[]
  supplierInvoices                SupplierInvoice[]
  jobs                            Job[]
  productsPurchased               Product[]               @relation("Customer")
  productsSupplied                Product[]               @relation("Supplier")
  productCostGroups               ProductCostGroup[]
  purchaseOrders                  PurchaseOrder[]
  purchaseOrdersAsConsignee       PurchaseOrder[]         @relation("POConsignee")
  shipmentsAsCarrier              Shipment[]              @relation("CarrierCompany")
  shipmentsAsReceiver             Shipment[]              @relation("ReceiverCompany")
  shipmentsAsSender               Shipment[]              @relation("SenderCompany")
  pricingGroups                   SupplierPricingGroup[]
  vendorCustomerPricingAsCustomer VendorCustomerPricing[] @relation("CustomerCompany")
  vendorCustomerPricingAsVendor   VendorCustomerPricing[] @relation("VendorCompany")
  defaultAddress                  Address?                @relation("CompanyDefaultAddress", fields: [defaultAddressId], references: [id], onDelete: SetNull)
}

model VariantSet {
  id            Int            @id @default(autoincrement())
  name          String?
  variants      String[]
  createdBy     String?
  modifiedBy    String?
  createdAt     DateTime?      @default(now())
  updatedAt     DateTime?      @updatedAt
  assemblies    Assembly[]
  products      Product[]
  shipmentLines ShipmentLine[]
}

model SupplierPricingGroup {
  id         Int       @id @default(autoincrement())
  name       String?
  supplierId Int?
  createdBy  String?
  modifiedBy String?
  createdAt  DateTime? @default(now())
  updatedAt  DateTime? @updatedAt
  products   Product[]
  supplier   Company?  @relation(fields: [supplierId], references: [id])
}

model ValueList {
  id                                 Int                @id @default(autoincrement())
  code                               String?
  label                              String
  value                              Decimal?           @db.Decimal(14, 4)
  createdBy                          String?
  modifiedBy                         String?
  createdAt                          DateTime?          @default(now())
  updatedAt                          DateTime?          @updatedAt
  parentId                           Int?
  type                               ValueListType
  assemblyDefectReasons              AssemblyActivity[] @relation("AssemblyActivity_defectReason")
  invoicesTaxCode                    Invoice[]          @relation("Inv_TaxCode")
  invoiceLinesTaxCode                InvoiceLine[]      @relation("TaxCode")
  productsCategory                   Product[]          @relation("ProductCategory")
  productsSubCategory                Product[]          @relation("ProductSubCategory")
  productsTax                        Product[]          @relation("Tax")
  productTemplatesDefaultCategory    ProductTemplate[]  @relation("ProductTemplateDefaultCategory")
  productTemplatesDefaultSubCategory ProductTemplate[]  @relation("ProductTemplateDefaultSubCategory")
  parent                             ValueList?         @relation("ValueListParent", fields: [parentId], references: [id])
  children                           ValueList[]        @relation("ValueListParent")
}

model ProductTemplate {
  id                      Int               @id @default(autoincrement())
  code                    String            @unique
  label                   String
  productType             ProductType
  defaultCategoryId       Int?
  defaultCategory         ValueList?        @relation("ProductTemplateDefaultCategory", fields: [defaultCategoryId], references: [id])
  defaultSubCategoryId    Int?
  defaultSubCategory      ValueList?        @relation("ProductTemplateDefaultSubCategory", fields: [defaultSubCategoryId], references: [id])
  defaultExternalStepType ExternalStepType?
  requiresSupplier        Boolean           @default(false)
  requiresCustomer        Boolean           @default(false)
  defaultStockTracking    Boolean           @default(false)
  defaultBatchTracking    Boolean           @default(false)
  skuSeriesKey            String?
  isActive                Boolean           @default(true)
  products                Product[]
}

model SkuSeriesCounter {
  id        Int    @id @default(autoincrement())
  seriesKey String @unique
  nextNum   Int    @default(1)
}

model Assembly {
  id                           Int                 @id @default(autoincrement())
  name                         String?
  status                       String?
  manualHoldOn                 Boolean             @default(false)
  manualHoldReason             String?
  manualHoldType               HoldType?
  quantity                     Decimal?            @db.Decimal(14, 4)
  qtyOrderedBreakdown          Int[]               @default([])
  canceledQty                  Int                 @default(0)
  canceledQtyBySize            Int[]               @default([])
  cancelReason                 String?
  canceledAt                   DateTime?
  internalTargetDateOverride   DateTime?
  customerTargetDateOverride   DateTime?
  dropDeadDateOverride         DateTime?
  shipToLocationIdOverride     Int?
  shipToAddressIdOverride      Int?
  notes                        String?
  statusWhiteboard             String?
  jobId                        Int?
  assemblyGroupId              Int?
  productId                    Int?
  variantSetId                 Int?
  createdBy                    String?
  modifiedBy                   String?
  createdAt                    DateTime?           @default(now())
  updatedAt                    DateTime?           @updatedAt
  nameUnaccented               String?
  notesUnaccented              String?
  assemblyType                 String?             @default("Prod")
  primaryCostingId             Int?
  materialCoverageTolerancePct Decimal?            @db.Decimal(8, 6)
  materialCoverageToleranceAbs Decimal?            @db.Decimal(14, 4)
  assemblyGroup                AssemblyGroup?      @relation(fields: [assemblyGroupId], references: [id])
  job                          Job?                @relation("Job_Assemblies", fields: [jobId], references: [id])
  primaryCosting               Costing?            @relation("PrimaryAssemblyCosting", fields: [primaryCostingId], references: [id])
  product                      Product?            @relation(fields: [productId], references: [id])
  variantSet                   VariantSet?         @relation(fields: [variantSetId], references: [id])
  shipToLocationOverride       Location?           @relation("Assembly_shipToLocation", fields: [shipToLocationIdOverride], references: [id])
  shipToAddressOverride        Address?            @relation("AssemblyShipToAddressOverride", fields: [shipToAddressIdOverride], references: [id], onDelete: SetNull)
  activities                   AssemblyActivity[]  @relation("Assembly_Activities")
  assemblyTags                 AssemblyTag[]
  batches                      Batch[]
  boxLines                     BoxLine[]
  costings                     Costing[]
  materialDemands              MaterialDemand[]
  supplyReservations           SupplyReservation[]
  purchaseOrderLines           PurchaseOrderLine[]
  shipmentLines                ShipmentLine[]
}

model Costing {
  id                      Int               @id @default(autoincrement())
  assemblyId              Int?
  productId               Int?
  quantityPerUnit         Decimal?          @db.Decimal(14, 4)
  unitCost                Decimal?          @db.Decimal(14, 4)
  notes                   String?
  activityUsed            String?
  costPricePerItem        Decimal?          @db.Decimal(14, 4)
  salePricePerItem        Decimal?          @db.Decimal(14, 4)
  salePriceGroupId        Int?
  manualSalePrice         Decimal?          @db.Decimal(14, 4)
  manualMargin            Decimal?          @db.Decimal(14, 4)
  flagAssembly            Boolean?
  flagDefinedInProduct    Boolean?
  flagIsBillableManual    Boolean?
  flagIsInvoiceableManual Boolean?
  createdBy               String?
  modifiedBy              String?
  createdAt               DateTime?         @default(now())
  updatedAt               DateTime?         @updatedAt
  flagStockTracked        Boolean?
  flagIsDisabled          Boolean?
  externalStepType        ExternalStepType?
  leadTimeDays            Int?
  primaryForAssemblies    Assembly[]        @relation("PrimaryAssemblyCosting")
  assembly                Assembly?         @relation(fields: [assemblyId], references: [id])
  product                 Product?          @relation(fields: [productId], references: [id])
  salePriceGroup          SalePriceGroup?   @relation("Costing_SalePriceGroup", fields: [salePriceGroupId], references: [id])
  costingTags             CostingTag[]
  invoiceLines            InvoiceLine[]
  materialDemands         MaterialDemand[]
}

model MaterialDemand {
  id          Int                   @id @default(autoincrement())
  assemblyId  Int
  productId   Int
  costingId   Int?
  qtyRequired Decimal?              @db.Decimal(14, 4)
  uom         String?
  source      MaterialDemandSource?
  createdAt   DateTime              @default(now())
  updatedAt   DateTime              @updatedAt
  assembly    Assembly              @relation(fields: [assemblyId], references: [id], onDelete: Cascade)
  product     Product               @relation(fields: [productId], references: [id], onDelete: Cascade)
  costing     Costing?              @relation(fields: [costingId], references: [id])

  @@unique([assemblyId, productId, costingId])
  @@index([assemblyId])
  @@index([productId])
}

model SupplyReservation {
  id                  Int                @id @default(autoincrement())
  assemblyId          Int
  productId           Int
  purchaseOrderLineId Int?
  inventoryBatchId    Int?
  qtyReserved         Decimal            @db.Decimal(14, 4)
  note                String?
  settledAt           DateTime?
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  assembly            Assembly           @relation(fields: [assemblyId], references: [id], onDelete: Cascade)
  product             Product            @relation(fields: [productId], references: [id], onDelete: Cascade)
  purchaseOrderLine   PurchaseOrderLine? @relation(fields: [purchaseOrderLineId], references: [id])
  inventoryBatch      Batch?             @relation(fields: [inventoryBatchId], references: [id])

  @@index([assemblyId])
  @@index([productId])
  @@index([purchaseOrderLineId])
  @@index([inventoryBatchId])
}

model OperationLog {
  id         Int      @id @default(autoincrement())
  userId     Int?
  action     String
  entityType String?
  entityId   Int?
  detail     Json?
  createdAt  DateTime @default(now())
  user       User?    @relation(fields: [userId], references: [id])

  @@index([action])
  @@index([entityType, entityId])
}

model ProductLine {
  id                 Int       @id @default(autoincrement())
  parentId           Int?
  childId            Int?
  quantity           Decimal?  @db.Decimal(14, 4)
  unitCost           Decimal?  @db.Decimal(14, 4)
  unitCostManual     Decimal?  @db.Decimal(14, 4)
  activityUsed       String?
  flagAssemblyOmit   Boolean?
  createdBy          String?
  modifiedBy         String?
  createdAt          DateTime? @default(now())
  updatedAt          DateTime? @updatedAt
  primaryForProducts Product[] @relation("PrimaryProductLine")
  child              Product?  @relation(fields: [childId], references: [id])
  parent             Product?  @relation("ParentProduct", fields: [parentId], references: [id])
}

model Location {
  id                    Int                @id @default(autoincrement())
  name                  String?
  is_active             Boolean?
  notes                 String?
  createdBy             String?
  modifiedBy            String?
  createdAt             DateTime?          @default(now())
  updatedAt             DateTime?          @updatedAt
  type                  LocationType?
  assemblyActivitiesIn  AssemblyActivity[] @relation("AssemblyActivity_LocationIn")
  assemblyActivitiesOut AssemblyActivity[] @relation("AssemblyActivity_LocationOut")
  batches               Batch[]
  boxes                 Box[]
  companiesStock        Company[]          @relation("Company_stockLocation")
  jobsStock             Job[]              @relation("Job_stockLocation")
  jobsShipTo            Job[]              @relation("Job_shipToLocation")
  assembliesShipTo      Assembly[]         @relation("Assembly_shipToLocation")
  ProductMovement       ProductMovement[]
  purchaseOrders        PurchaseOrder[]
  shipments             Shipment[]
  shipmentLines         ShipmentLine[]
}

model Batch {
  id                  Int                   @id @default(autoincrement())
  productId           Int?
  locationId          Int?
  jobId               Int?
  assemblyId          Int?
  codeMill            String?
  codeSartor          String?
  name                String?
  source              String?
  quantity            Decimal?              @db.Decimal(14, 4)
  receivedAt          DateTime?
  notes               String?
  createdBy           String?
  modifiedBy          String?
  createdAt           DateTime?             @default(now())
  updatedAt           DateTime?             @updatedAt
  assembly            Assembly?             @relation(fields: [assemblyId], references: [id])
  job                 Job?                  @relation(fields: [jobId], references: [id])
  location            Location?             @relation(fields: [locationId], references: [id])
  product             Product?              @relation(fields: [productId], references: [id])
  boxLines            BoxLine[]
  ProductMovementLine ProductMovementLine[]
  supplyReservations  SupplyReservation[]
}

model ProductMovement {
  id                   Int                   @id @default(autoincrement())
  movementType         String?
  date                 DateTime?
  locationId           Int?
  assemblyActivityId   Int?
  assemblyId           Int?
  assemblyGroupId      Int?
  assemblyGroupEventId Int?
  costingId            Int?
  expenseId            Int?
  jobId                Int?
  locationInId         Int?
  locationOutId        Int?
  shippingType         String?
  groupKey             String?
  productId            Int?
  quantity             Decimal?              @db.Decimal(14, 4)
  purchaseOrderLineId  Int?
  shippingLineId       Int?
  notes                String?
  createdBy            String?
  modifiedBy           String?
  createdAt            DateTime?             @default(now())
  updatedAt            DateTime?             @updatedAt
  location             Location?             @relation(fields: [locationId], references: [id])
  assemblyGroupEvent   AssemblyGroupEvent?   @relation(fields: [assemblyGroupEventId], references: [id], onDelete: SetNull)
  lines                ProductMovementLine[]

  @@index([productId], map: "idx_product_movement_product_id")
  @@index([productId, date, id], map: "idx_product_movement_product_date_id")
  @@index([assemblyGroupEventId])
}

model ProductMovementLine {
  id                  Int              @id @default(autoincrement())
  movementId          Int?
  productId           Int?
  batchId             Int?
  costingId           Int?
  productMovementId   Int?
  purchaseOrderLineId Int?
  quantity            Decimal?         @db.Decimal(14, 4)
  notes               String?
  createdBy           String?
  modifiedBy          String?
  createdAt           DateTime?        @default(now())
  updatedAt           DateTime?        @updatedAt
  batch               Batch?           @relation(fields: [batchId], references: [id])
  movement            ProductMovement? @relation(fields: [movementId], references: [id])
  product             Product?         @relation(fields: [productId], references: [id])

  @@index([productId], map: "idx_product_movement_line_product_id")
}

model Job {
  id                      Int                  @id @default(autoincrement())
  projectCode             String?
  name                    String?
  description             String?
  startDate               DateTime?
  endDate                 DateTime?
  status                  String?
  state                   JobState             @default(DRAFT)
  cancelReason            String?
  canceledAt              DateTime?
  jobHoldOn               Boolean              @default(false)
  jobHoldReason           String?
  jobHoldType             HoldType?
  jobType                 String?
  isActive                Boolean?
  notes                   String?
  statusWhiteboard        String?
  endCustomerName         String?
  endCustomerContactId    Int?
  companyId               Int?
  stockLocationId         Int?
  customerOrderDate       DateTime?
  customerOrderDateManual DateTime?
  cutSubmissionDate       DateTime?
  dropDeadDate            DateTime?
  internalTargetDate      DateTime?
  customerTargetDate      DateTime?
  shipToLocationId        Int?
  shipToAddressId         Int?
  finishDate              DateTime?
  finishDateManual        DateTime?
  firstInvoiceDate        DateTime?
  targetDate              DateTime?
  customerPoNum           String?
  createdBy               String?
  modifiedBy              String?
  createdAt               DateTime?            @default(now())
  updatedAt               DateTime?            @updatedAt
  nameUnaccented          String?
  descriptionUnaccented   String?
  assemblies              Assembly[]           @relation("Job_Assemblies")
  assemblyActivities      AssemblyActivity[]
  assemblyGroups          AssemblyGroup[]
  batches                 Batch[]
  boxLines                BoxLine[]
  expenses                Expense[]
  invoiceLines            InvoiceLine[]
  company                 Company?             @relation(fields: [companyId], references: [id])
  endCustomerContact      Contact?             @relation("JobEndCustomerContact", fields: [endCustomerContactId], references: [id], onDelete: SetNull)
  stockLocation           Location?            @relation("Job_stockLocation", fields: [stockLocationId], references: [id])
  shipToLocation          Location?            @relation("Job_shipToLocation", fields: [shipToLocationId], references: [id])
  shipToAddress           Address?             @relation("JobShipToAddress", fields: [shipToAddressId], references: [id], onDelete: SetNull)
  jobTags                 JobTag[]
  purchaseOrderLines      PurchaseOrderLine[]
  shipmentLines           ShipmentLine[]
  assemblyGroupEvents     AssemblyGroupEvent[]
}

model AssemblyGroup {
  id         Int                  @id @default(autoincrement())
  jobId      Int?
  name       String?
  createdBy  String?
  modifiedBy String?
  createdAt  DateTime?            @default(now())
  updatedAt  DateTime?            @updatedAt
  assemblies Assembly[]
  events     AssemblyGroupEvent[]
  job        Job?                 @relation(fields: [jobId], references: [id])
}

model AssemblyGroupEvent {
  id               Int                @id @default(autoincrement())
  assemblyGroupId  Int
  jobId            Int?
  type             String
  eventDate        DateTime           @default(now())
  notes            String?
  createdBy        String?
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  assemblyGroup    AssemblyGroup      @relation(fields: [assemblyGroupId], references: [id], onDelete: Cascade)
  job              Job?               @relation(fields: [jobId], references: [id])
  activities       AssemblyActivity[]
  productMovements ProductMovement[]

  @@index([assemblyGroupId, eventDate])
}

model SavedView {
  id         Int      @id @default(autoincrement())
  module     String
  name       String
  params     Json
  isGlobal   Boolean  @default(false)
  isLocked   Boolean  @default(false)
  ownerUserId Int?
  ownerUser  User?    @relation(fields: [ownerUserId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  createdBy  String?
  modifiedBy String?
}

model AssemblyActivity {
  id                       Int                 @id @default(autoincrement())
  assemblyId               Int?
  jobId                    Int?
  assemblyGroupEventId     Int?
  name                     String?
  description              String?
  activityDate             DateTime?
  groupKey                 String?
  notes                    String?
  productId                Int?
  locationInId             Int?
  locationOutId            Int?
  quantity                 Decimal?            @db.Decimal(14, 4)
  qtyFabricConsumed        Decimal?            @db.Decimal(14, 4)
  qtyFabricConsumedPerUnit Decimal?            @db.Decimal(14, 4)
  qtyBreakdown             Int[]               @default([])
  createdBy                String?
  modifiedBy               String?
  createdAt                DateTime?           @default(now())
  updatedAt                DateTime?           @updatedAt
  defectDisposition        DefectDisposition?  @default(none)
  defectReasonId           Int?
  kind                     ActivityKind?
  stage                    AssemblyStage?
  action                   ActivityAction?
  externalStepType         ExternalStepType?
  vendorCompanyId          Int?
  assembly                 Assembly?           @relation("Assembly_Activities", fields: [assemblyId], references: [id])
  assemblyGroupEvent       AssemblyGroupEvent? @relation(fields: [assemblyGroupEventId], references: [id], onDelete: SetNull)
  defectReason             ValueList?          @relation("AssemblyActivity_defectReason", fields: [defectReasonId], references: [id])
  job                      Job?                @relation(fields: [jobId], references: [id])
  locationIn               Location?           @relation("AssemblyActivity_LocationIn", fields: [locationInId], references: [id])
  locationOut              Location?           @relation("AssemblyActivity_LocationOut", fields: [locationOutId], references: [id])
  vendorCompany            Company?            @relation("AssemblyActivity_vendorCompany", fields: [vendorCompanyId], references: [id])

  @@index([assemblyId, stage, activityDate])
  @@index([assemblyId, externalStepType, action, activityDate])
  @@index([assemblyGroupEventId])
  @@index([vendorCompanyId, activityDate])
}

model User {
  id               Int             @id @default(autoincrement())
  email            String          @unique
  passwordHash     String
  name             String?
  recordsPerPage   Int             @default(25)
  isActive         Boolean         @default(true)
  colorScheme      ColorScheme     @default(light)
  desktopNavOpened Boolean         @default(true)
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  firstName        String?
  lastName         String?
  userLevel        UserLevel       @default(Admin)
  resets           PasswordReset[]
  tagDefinitions   TagDefinition[]
  operationLogs    OperationLog[]
  savedViews       SavedView[]
  etaConfirmedPurchaseOrderLines PurchaseOrderLine[] @relation("PurchaseOrderLineEtaConfirmedBy")
}

model PasswordReset {
  id        Int       @id @default(autoincrement())
  userId    Int
  otp       String
  token     String    @unique
  expiresAt DateTime
  usedAt    DateTime?
  createdAt DateTime  @default(now())
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model DHLReportLine {
  id                         Int       @id
  accountName                String?
  awbNumber                  String?
  billedWeight               Decimal?  @db.Decimal(14, 4)
  billingAccountNumber       String?
  billingExchangeRate        Decimal?  @db.Decimal(14, 4)
  destinationCountryCode     String?
  destinationCountryName     String?
  destinationServiceAreaCode String?
  destinationServiceAreaName String?
  globalProductCode          String?
  globalProductName          String?
  invoiceDate                DateTime?
  invoiceNumber              String?
  numberOfPieces             Int?
  opsConsigneeContactName    String?
  opsConsigneeName           String?
  opsConsignorContactName    String?
  opsConsignorName           String?
  originCountryCode          String?
  originCountryName          String?
  originServiceAreaCode      String?
  originServiceAreaName      String?
  relativePeriod             String?
  shipmentPickUpDate         DateTime?
  shipmentReference          String?
  shipperAccountNumber       String?
  totalRevenueEUR            Decimal?  @db.Decimal(14, 4)
  totalRevenueLCY            Decimal?  @db.Decimal(14, 4)
  totalTaxEUR                Decimal?  @db.Decimal(14, 4)
  totalTaxLCY                Decimal?  @db.Decimal(14, 4)
  createdAt                  DateTime? @default(now())
  updatedAt                  DateTime? @updatedAt
}

model ForexLine {
  id           Int      @id @default(autoincrement())
  date         DateTime
  price        Float
  currencyFrom String   @default("USD")
  currencyTo   String   @default("TRY")
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@unique([date, currencyFrom, currencyTo])
}

model Invoice {
  id              Int           @id
  companyId       Int?
  invoiceCode     String?       @unique
  date            DateTime?
  productSkuCopy  String?
  productNameCopy String?
  priceCost       Decimal?      @db.Decimal(14, 4)
  priceSell       Decimal?      @db.Decimal(14, 4)
  taxCodeId       Int?
  taxRateCopy     Decimal?      @db.Decimal(14, 4)
  notes           String?
  status          String?
  createdBy       String?
  createdAt       DateTime?     @default(now())
  modifiedBy      String?
  updatedAt       DateTime?     @updatedAt
  company         Company?      @relation(fields: [companyId], references: [id])
  taxCode         ValueList?    @relation("Inv_TaxCode", fields: [taxCodeId], references: [id])
  lines           InvoiceLine[]
}

model InvoiceLine {
  id                  Int        @id
  costingId           Int?
  expenseId           Int?
  invoiceId           Int?
  jobId               Int?
  productId           Int?
  purchaseOrderLineId Int?
  shippingIdActual    Int?
  shippingIdDuty      Int?
  category            String?
  details             String?
  subCategory         String?
  priceCost           Decimal?   @db.Decimal(14, 4)
  priceSell           Decimal?   @db.Decimal(14, 4)
  quantity            Decimal?   @db.Decimal(14, 4)
  taxCodeId           Int?
  taxRateCopy         Decimal?   @db.Decimal(14, 4)
  invoicedTotalManual Decimal?   @db.Decimal(14, 4)
  createdBy           String?
  createdAt           DateTime?  @default(now())
  modifiedBy          String?
  updatedAt           DateTime?  @updatedAt
  invoicedPrice       Decimal?   @db.Decimal(14, 4)
  costing             Costing?   @relation(fields: [costingId], references: [id])
  expense             Expense?   @relation(fields: [expenseId], references: [id])
  invoice             Invoice?   @relation(fields: [invoiceId], references: [id])
  job                 Job?       @relation(fields: [jobId], references: [id])
  product             Product?   @relation(fields: [productId], references: [id])
  taxCode             ValueList? @relation("TaxCode", fields: [taxCodeId], references: [id])
}

model Expense {
  id              Int           @id
  jobId           Int?
  productId       Int?
  purchaseOrderId Int?
  shippingId      Int?
  category        String?
  date            DateTime?
  details         String?
  memo            String?
  priceCost       Decimal?      @db.Decimal(14, 4)
  priceSell       Decimal?      @db.Decimal(14, 4)
  quantity        Decimal?      @db.Decimal(14, 4)
  source          String?
  subcategory     String?
  createdBy       String?
  createdAt       DateTime?     @default(now())
  modifiedBy      String?
  updatedAt       DateTime?     @updatedAt
  job             Job?          @relation(fields: [jobId], references: [id])
  product         Product?      @relation(fields: [productId], references: [id])
  shipment        Shipment?     @relation(fields: [shippingId], references: [id])
  invoiceLines    InvoiceLine[]
}

model Box {
  id              Int       @id @default(autoincrement())
  code            String?   @unique
  importKey       String?   @unique
  description     String?
  warehouseNumber Int?
  shipmentNumber  Int?
  locationId      Int?
  shipmentId      Int?
  companyId       Int?
  state           BoxState  @default(open)
  notes           String?
  createdBy       String?
  modifiedBy      String?
  createdAt       DateTime? @default(now())
  updatedAt       DateTime? @updatedAt
  company         Company?  @relation(fields: [companyId], references: [id])
  location        Location? @relation(fields: [locationId], references: [id])
  shipment        Shipment? @relation(fields: [shipmentId], references: [id])
  lines           BoxLine[]

  @@index([locationId])
  @@index([shipmentId])
  @@index([companyId])
  @@index([warehouseNumber])
  @@index([shipmentNumber, shipmentId])
  @@index([state, companyId, locationId])
}

model BoxLine {
  id             Int           @id @default(autoincrement())
  boxId          Int
  productId      Int?
  batchId        Int?
  jobId          Int?
  assemblyId     Int?
  shipmentLineId Int?
  quantity       Decimal?      @db.Decimal(14, 4)
  qtyBreakdown   Int[]         @default([])
  notes          String?
  createdBy      String?
  modifiedBy     String?
  createdAt      DateTime?     @default(now())
  updatedAt      DateTime?     @updatedAt
  description    String?
  isAdHoc        Boolean?      @default(false)
  packingOnly    Boolean?      @default(false)
  assembly       Assembly?     @relation(fields: [assemblyId], references: [id])
  batch          Batch?        @relation(fields: [batchId], references: [id])
  box            Box           @relation(fields: [boxId], references: [id])
  job            Job?          @relation(fields: [jobId], references: [id])
  product        Product?      @relation(fields: [productId], references: [id])
  shipmentLine   ShipmentLine? @relation(fields: [shipmentLineId], references: [id])

  @@index([boxId])
  @@index([productId])
  @@index([batchId])
  @@index([jobId])
  @@index([assemblyId])
  @@index([shipmentLineId])
}

model Shipment {
  id                 Int            @id
  addressIdShip      Int?
  companyIdCarrier   Int?
  companyIdReceiver  Int?
  companyIdSender    Int?
  locationId         Int?
  contactIdReceiver  Int?
  date               DateTime?
  dateReceived       DateTime?
  packingSlipCode    String?
  shipmentType       String?
  status             ShipmentStatus @default(DRAFT)
  trackingNo         String?
  type               String?
  memo               String?
  shippingMethod     String?
  addressName        String?
  addressCountry     String?
  addressCountyState String?
  addressLine1       String?
  addressLine2       String?
  addressLine3       String?
  addressTownCity    String?
  addressZipPostCode String?
  createdBy          String?
  createdAt          DateTime?      @default(now())
  modifiedBy         String?
  updatedAt          DateTime?      @updatedAt
  packMode           String?        @default("line")
  boxes              Box[]
  expenses           Expense[]
  addressShip        Address?       @relation("Address_shipments", fields: [addressIdShip], references: [id])
  companyCarrier     Company?       @relation("CarrierCompany", fields: [companyIdCarrier], references: [id])
  companyReceiver    Company?       @relation("ReceiverCompany", fields: [companyIdReceiver], references: [id])
  companySender      Company?       @relation("SenderCompany", fields: [companyIdSender], references: [id])
  location           Location?      @relation(fields: [locationId], references: [id])
  lines              ShipmentLine[]
  shipmentTags       ShipmentTag[]
}

model ShipmentLine {
  id           Int         @id
  assemblyId   Int?
  jobId        Int?
  locationId   Int?
  productId    Int?
  purchaseOrderLineId Int?
  shipmentId   Int?
  variantSetId Int?
  category     String?
  details      String?
  quantity     Decimal?    @db.Decimal(14, 4)
  qtyBreakdown Int[]       @default([])
  status       String?
  subCategory  String?
  createdBy    String?
  createdAt    DateTime?   @default(now())
  modifiedBy   String?
  updatedAt    DateTime?   @updatedAt
  boxLines     BoxLine[]
  assembly     Assembly?   @relation(fields: [assemblyId], references: [id])
  job          Job?        @relation(fields: [jobId], references: [id])
  location     Location?   @relation(fields: [locationId], references: [id])
  product      Product?    @relation(fields: [productId], references: [id])
  purchaseOrderLine PurchaseOrderLine? @relation(fields: [purchaseOrderLineId], references: [id])
  shipment     Shipment?   @relation(fields: [shipmentId], references: [id])
  variantSet   VariantSet? @relation(fields: [variantSetId], references: [id])

  @@index([purchaseOrderLineId])
}

model Address {
  id                 Int        @id
  companyId          Int?
  contactId          Int?
  name               String?
  addressCountry     String?
  addressCountyState String?
  addressLine1       String?
  addressLine2       String?
  addressLine3       String?
  addressTownCity    String?
  addressZipPostCode String?
  createdBy          String?
  createdAt          DateTime?  @default(now())
  modifiedBy         String?
  updatedAt          DateTime?  @updatedAt
  company            Company?   @relation("CompanyAddresses", fields: [companyId], references: [id], onDelete: Cascade)
  contact            Contact?   @relation("ContactAddresses", fields: [contactId], references: [id], onDelete: Cascade)
  companyDefaultFor  Company[]  @relation("CompanyDefaultAddress")
  contactDefaultFor  Contact[]  @relation("ContactDefaultAddress")
  jobShipTos         Job[]      @relation("JobShipToAddress")
  assemblyShipTos    Assembly[] @relation("AssemblyShipToAddressOverride")
  shipments          Shipment[] @relation("Address_shipments")
}

model Contact {
  id               Int       @id
  defaultAddressId Int?
  companyId        Int?
  email            String?
  department       String?
  firstName        String?
  lastName         String?
  title            String?
  phoneDirect      String?
  phoneHome        String?
  phoneMobile      String?
  position         String?
  recordType       String?
  createdBy        String?
  createdAt        DateTime? @default(now())
  modifiedBy       String?
  updatedAt        DateTime? @updatedAt
  defaultAddress   Address?  @relation("ContactDefaultAddress", fields: [defaultAddressId], references: [id], onDelete: SetNull)
  addresses        Address[] @relation("ContactAddresses")
  company          Company?  @relation(fields: [companyId], references: [id])
  endCustomerJobs  Job[]     @relation("JobEndCustomerContact")
}

model PurchaseOrder {
  id                 Int                 @id
  companyId          Int?
  consigneeCompanyId Int?
  locationId         Int?
  date               DateTime?
  memo               String?
  status             String?
  invoiceTrackingStatus PurchaseOrderInvoiceTrackingStatus @default(UNKNOWN)
  createdBy          String?
  createdAt          DateTime?           @default(now())
  modifiedBy         String?
  updatedAt          DateTime?           @updatedAt
  company            Company?            @relation(fields: [companyId], references: [id])
  consignee          Company?            @relation("POConsignee", fields: [consigneeCompanyId], references: [id])
  location           Location?           @relation(fields: [locationId], references: [id])
  lines              PurchaseOrderLine[]
  purchaseOrderTags  PurchaseOrderTag[]
  supplierInvoices   SupplierInvoice[]
}

model SupplierInvoice {
  id                Int                 @id @default(autoincrement())
  companyId         Int?
  purchaseOrderId   Int?
  invoiceDate       DateTime?
  supplierInvoiceNo String?
  type              SupplierInvoiceType?
  totalExTax        Decimal?            @db.Decimal(14, 4)
  taxCode           String?
  legacySerial      Int?                @unique
  createdBy         String?
  createdAt         DateTime?           @default(now())
  modifiedBy        String?
  updatedAt         DateTime?           @updatedAt
  company           Company?            @relation(fields: [companyId], references: [id])
  purchaseOrder     PurchaseOrder?      @relation(fields: [purchaseOrderId], references: [id])

  @@index([purchaseOrderId])
}

model PurchaseOrderLine {
  id                 Int                 @id
  purchaseOrderId    Int?
  jobId              Int?
  assemblyId         Int?
  productId          Int?
  productSkuCopy     String?
  productNameCopy    String?
  priceCost          Decimal?            @db.Decimal(18, 8)
  priceSell          Decimal?            @db.Decimal(18, 8)
  manualCost         Decimal?            @db.Decimal(18, 8)
  manualSell         Decimal?            @db.Decimal(18, 8)
  qtyShipped         Decimal?            @db.Decimal(14, 4)
  qtyReceived        Decimal?            @db.Decimal(14, 4)
  quantity           Decimal?            @db.Decimal(14, 4)
  quantityOrdered    Decimal?            @db.Decimal(14, 4)
  taxCode            String?
  taxRate            Decimal?            @db.Decimal(14, 4)
  createdBy          String?
  createdAt          DateTime?           @default(now())
  modifiedBy         String?
  updatedAt          DateTime?           @updatedAt
  etaDate            DateTime?
  etaDateConfirmed   Boolean?            @default(false)
  etaConfirmedAt     DateTime?
  etaConfirmedByUserId Int?
  assembly           Assembly?           @relation(fields: [assemblyId], references: [id])
  job                Job?                @relation(fields: [jobId], references: [id])
  product            Product?            @relation(fields: [productId], references: [id])
  purchaseOrder      PurchaseOrder?      @relation(fields: [purchaseOrderId], references: [id])
  etaConfirmedByUser User?               @relation("PurchaseOrderLineEtaConfirmedBy", fields: [etaConfirmedByUserId], references: [id])
  shipmentLines      ShipmentLine[]
  supplyReservations SupplyReservation[]
}

model ProductCostGroup {
  id              Int                @id @default(autoincrement())
  supplierId      Int?
  currency        String?
  name            String?
  costPrice       Decimal?           @db.Decimal(14, 4)
  sellPriceManual Decimal?           @db.Decimal(14, 4)
  createdBy       String?
  modifiedBy      String?
  createdAt       DateTime?          @default(now())
  updatedAt       DateTime?          @updatedAt
  products        Product[]
  supplier        Company?           @relation(fields: [supplierId], references: [id])
  costRanges      ProductCostRange[]

  @@index([supplierId])
}

model ProductCostRange {
  id                Int               @id @default(autoincrement())
  productId         Int?
  costGroupId       Int?
  costPrice         Decimal?          @db.Decimal(14, 4)
  sellPriceManual   Decimal?          @db.Decimal(14, 4)
  rangeFrom         Int?
  rangeTo           Int?
  generatedBySpecId Int?
  generatedAt       DateTime?
  generatedHash     String?
  createdBy         String?
  modifiedBy        String?
  createdAt         DateTime?         @default(now())
  updatedAt         DateTime?         @updatedAt
  costGroup         ProductCostGroup? @relation(fields: [costGroupId], references: [id])
  product           Product?          @relation(fields: [productId], references: [id])
  generatedBySpec   PricingSpec?      @relation(fields: [generatedBySpecId], references: [id], onDelete: SetNull)

  @@index([productId])
  @@index([costGroupId])
  @@index([generatedBySpecId])
}

model PricingSpec {
  id                 Int                @id @default(autoincrement())
  code               String             @unique
  name               String
  target             PricingSpecTarget
  curveFamily        PricingCurveFamily
  defaultBreakpoints Int[]              @default([1, 5, 10, 15, 20, 25, 50, 75, 100, 125, 150, 175, 200, 250])
  params             Json?
  notes              String?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  products           Product[]
  salePriceRanges    SalePriceRange[]
  productCostRanges  ProductCostRange[]
  ranges             PricingSpecRange[]
}

model PricingSpecRange {
  id            Int          @id @default(autoincrement())
  pricingSpecId Int
  rangeFrom     Int?
  rangeTo       Int?
  multiplier    Decimal      @db.Decimal(14, 6)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  pricingSpec   PricingSpec  @relation(fields: [pricingSpecId], references: [id], onDelete: Cascade)

  @@index([pricingSpecId])
  @@index([pricingSpecId, rangeFrom, rangeTo])
}

model SalePriceGroup {
  id         Int              @id @default(autoincrement())
  name       String?
  currency   String?
  createdBy  String?
  modifiedBy String?
  createdAt  DateTime?        @default(now())
  updatedAt  DateTime?        @updatedAt
  costings   Costing[]        @relation("Costing_SalePriceGroup")
  products   Product[]
  saleRanges SalePriceRange[]
}

model SalePriceRange {
  id                Int             @id @default(autoincrement())
  productId         Int?
  saleGroupId       Int?
  price             Decimal?        @db.Decimal(14, 4)
  rangeFrom         Int?
  rangeTo           Int?
  generatedBySpecId Int?
  generatedAt       DateTime?
  generatedHash     String?
  createdBy         String?
  modifiedBy        String?
  createdAt         DateTime?       @default(now())
  updatedAt         DateTime?       @updatedAt
  product           Product?        @relation(fields: [productId], references: [id])
  saleGroup         SalePriceGroup? @relation(fields: [saleGroupId], references: [id])
  generatedBySpec   PricingSpec?    @relation(fields: [generatedBySpecId], references: [id], onDelete: SetNull)

  @@index([productId])
  @@index([saleGroupId])
  @@index([generatedBySpecId])
}

model VendorCustomerPricing {
  id             Int      @id @default(autoincrement())
  vendorId       Int
  customerId     Int
  marginOverride Decimal? @db.Decimal(14, 4)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  customer       Company  @relation("CustomerCompany", fields: [customerId], references: [id], onDelete: Cascade)
  vendor         Company  @relation("VendorCompany", fields: [vendorId], references: [id], onDelete: Cascade)

  @@unique([vendorId, customerId])
  @@index([customerId])
}

model Setting {
  key       String   @id
  value     String?
  number    Decimal? @db.Decimal(14, 4)
  json      Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum ColorScheme {
  light
  dark
}

enum UserLevel {
  Admin
  Manager
  RegularJoe
}

enum ProductType {
  CMT
  Fabric
  Finished
  Trim
  Service
  Packaging
}

enum ProductStage {
  SETUP
  LIVE
}

enum PricingSpecTarget {
  SELL
  COST
}

enum ProductPricingModel {
  COST_PLUS_MARGIN
  COST_PLUS_FIXED_SELL
  TIERED_COST_PLUS_MARGIN
  CURVE_SELL_AT_MOQ
  TIERED_COST_PLUS_FIXED_SELL
}

enum PricingCurveFamily {
  CMT_MOQ_50
  CMT_MOQ_100
  OUTSIDE_ASYMPTOTIC_LOGISTICS
}

enum ProductAttributeDataType {
  STRING
  NUMBER
  ENUM
  BOOLEAN
  JSON
}

enum ProductAttributeDisplayWidth {
  full
  half
  third
}

enum JobState {
  DRAFT
  NEW
  ACTIVE
  COMPLETE
  CANCELED
}

enum HoldType {
  CLIENT
  INTERNAL
}

enum CompanyType {
  vendor
  customer
  other
}

enum InvoiceBillUpon {
  Ship
  Make
}

enum MaterialDemandSource {
  BOM
  IMPORT
  MANUAL
}

enum UsageType {
  cut
  make
}

enum ValueListType {
  Tax
  Category
  ProductType
  JobType
  Currency
  ShippingMethod
  AssemblyType
  DefectReason
}

enum AssemblyStage {
  order
  cut
  sew
  finish
  pack
  qc
  other
  cancel
}

enum ActivityKind {
  normal
  defect
  rework
}

enum ActivityAction {
  RECORDED
  SENT_OUT
  RECEIVED_IN
  ADJUSTMENT
  NOTE
}

enum ExternalStepType {
  EMBROIDERY
  WASH
  DYE
}

enum DefectDisposition {
  none
  scrap
  offSpec
  sample
  review
}

enum LocationType {
  warehouse
  customer_depot
  wip
  sample
  scrap
  off_spec
  review
}

enum BoxState {
  open
  sealed
  shipped
}

enum ShipmentStatus {
  DRAFT
  COMPLETE
  CANCELED
}

enum PurchaseOrderInvoiceTrackingStatus {
  UNKNOWN
  NO_INVOICE_EXPECTED
}

enum SupplierInvoiceType {
  INVOICE
  CREDIT_MEMO
}

enum TagScope {
  GLOBAL
  USER
}
